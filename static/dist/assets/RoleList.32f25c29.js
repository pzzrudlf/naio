import{p as F,bn as L,l as A,y as H,k as b,a as N,q as U,o as g,c as j,x as a,v as l,e,z as q,A as G,a6 as C,s as h,B as J,C as K,bo as O,bp as Q,F as W,i as m,D as X,G as Y,E as Z,a4 as ee}from"./index.8b30d168.js";import{E as te}from"./el-select.60ad4b12.js";import"./el-input.55b498ca.js";import{E as ne,a as oe}from"./el-table-column.bddec628.js";import"./el-checkbox.4c6020a8.js";/* empty css                */import{E as ae,a as se}from"./el-form-item.78367822.js";import{g as le,d as ie,a as re,e as ce,_ as ue}from"./AssignMenu.131ccd64.js";import{E as v}from"./baseEnum.d65d91be.js";import de from"./AddRole.7975e3de.js";import"./index2.1260ca42.js";import"./el-tree.6dd90539.js";import"./useDialog.8d08ce90.js";function me(){const r=F({list:[]}),s=F({userId:L()||"",currentPage:1,pageSize:10,name:"",total:0}),t=async()=>{let i=await le(s);i&&i.code==200&&(r.list=i.data.records,s.total=i.data.total)};return A(()=>{t()}),{roleTable:r,listParam:s,getRoleList:t,searchBtn:()=>{t()},resetBtn:()=>{s.name="",t()},sizeChange:i=>{s.pageSize=i,t()},currentChange:i=>{s.currentPage=i,t()}}}function pe(r){const{global:s}=H(),t=b(),c=b();return{addBtn:()=>{var n;(n=c.value)==null||n.show(v.ADD)},editBtn:n=>{var o;(o=c.value)==null||o.show(v.EDIT,n)},deleteBtn:async n=>{console.log("role=>deleteBtn::",n);let o={id:n};if(await s.$myconfirm("\u786E\u5B9A\u5220\u9664\u8BE5\u6570\u636E\u5417?")){let _=await ie(o);_&&_.code==200&&(s.$message({message:_.msg,type:"success"}),r())}},save:async n=>{console.log("\u7236\u7EC4\u4EF6\u63A5\u6536\u7684\u53C2\u6570==>",n);let o;n.type==v.ADD?o=await re(n):o=await ce(n),o&&o.code==200&&(r(),s.$message({message:o.msg,type:"success"}))},assignPermission:(n,o)=>{var p;(p=t.value)==null||p.show(n,o)},addRoleRef:c,assignMenuRef:t}}const _e=m("\u641C\u7D22"),ge=m("\u91CD\u7F6E"),fe=m("\u65B0\u589E"),Ce=m("\u7F16\u8F91"),he=m("\u5206\u914D\u6743\u9650"),Be=m("\u5220\u9664"),$e=N({name:"RoleList",setup(r){const s=b(0),{listParam:t,roleTable:c,getRoleList:B,sizeChange:y,currentChange:E,searchBtn:i,resetBtn:w}=me(),{addBtn:n,editBtn:o,deleteBtn:p,save:_,assignPermission:P,addRoleRef:T,assignMenuRef:x}=pe(B);return A(()=>{U(()=>{s.value=window.innerHeight-220})}),(ye,z)=>{const $=X,D=ae,u=Y,S=se,k=ne,I=oe,M=te,V=Z,f=ee("permission");return g(),j(W,null,[a(V,null,{default:l(()=>[a(S,{model:e(t),"label-width":"80px",inline:!0,size:"small"},{default:l(()=>[a(D,null,{default:l(()=>[a($,{placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0",modelValue:e(t).name,"onUpdate:modelValue":z[0]||(z[0]=d=>e(t).name=d)},null,8,["modelValue"])]),_:1}),a(D,null,{default:l(()=>[a(u,{icon:e(q),onClick:e(i)},{default:l(()=>[_e]),_:1},8,["icon","onClick"]),a(u,{icon:e(G),style:{color:"#FF7670"},onClick:e(w)},{default:l(()=>[ge]),_:1},8,["icon","onClick"]),C((g(),h(u,{type:"primary",icon:e(J),onClick:e(n)},{default:l(()=>[fe]),_:1},8,["icon","onClick"])),[[f,["sys:role:add"]]])]),_:1})]),_:1},8,["model"]),a(I,{height:s.value,data:e(c).list,border:"",stripe:""},{default:l(()=>[a(k,{prop:"name",label:"\u89D2\u8272\u540D\u79F0"}),a(k,{prop:"remark",label:"\u89D2\u8272\u5907\u6CE8"}),a(k,{label:"\u64CD\u4F5C",align:"center",width:"300"},{default:l(d=>[C((g(),h(u,{type:"primary",size:"small",icon:e(K),onClick:R=>e(o)(d.row)},{default:l(()=>[Ce]),_:2},1032,["icon","onClick"])),[[f,["sys:role:edit"]]]),C((g(),h(u,{type:"primary",size:"small",icon:e(O),onClick:R=>e(P)(d.row.id,d.row.name)},{default:l(()=>[he]),_:2},1032,["icon","onClick"])),[[f,["sys:role:assign"]]]),C((g(),h(u,{type:"danger",size:"small",icon:e(Q),onClick:R=>e(p)(d.row.id)},{default:l(()=>[Be]),_:2},1032,["icon","onClick"])),[[f,["sys:role:delete"]]])]),_:1})]),_:1},8,["height","data"]),a(M,{onSizeChange:e(y),onCurrentChange:e(E),"current-page":e(t).currentPage,"page-sizes":[10,20,40,80,100],"page-size":e(t).pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e(t).total,background:""},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])]),_:1}),a(de,{ref_key:"addRoleRef",ref:T,onSave:e(_)},null,8,["onSave"]),a(ue,{ref_key:"assignMenuRef",ref:x},null,512)],64)}}});export{$e as default};
