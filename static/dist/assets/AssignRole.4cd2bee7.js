import{y as D,k as C,p as R,bn as I,l as x,q as A,bU as V,bV as k,bW as L,a as O,o as P,s as T,v as h,x as c,e as t,X as U,i as B,t as F}from"./index.8b30d168.js";import{E as H}from"./el-select.60ad4b12.js";import"./el-input.55b498ca.js";import{E as $,a as N}from"./el-table-column.bddec628.js";import"./el-checkbox.4c6020a8.js";import{E as j}from"./el-radio.2829d223.js";import{u as q,S as M}from"./useDialog.8d08ce90.js";import"./index2.1260ca42.js";function W(b,f,o){const{global:i}=D(),g=C(0),p=C(""),a=C(""),_=async()=>{if(!a.value){i.$message({message:"\u8BF7\u9009\u62E9\u89D2\u8272",type:"warning"});return}let e={roleId:a.value,userId:p.value};console.log(e);let s=await V(e);s&&s.code==200&&(i.$message({message:"\u5206\u914D\u6210\u529F",type:"success"}),f())},r=async(e,s)=>{p.value=s,a.value="";let l=await k(s);l&&l.data&&(a.value=l.data.roleId),b.title="\u4E3A\u3010"+e+"\u3011\u5206\u914D\u89D2\u8272",o()},n=R({currentPage:1,pageSize:4,userId:I()||"",total:0}),d=R({list:[]}),u=async()=>{let e=await L(n);e&&e.code==200&&(d.list=e.data.records,n.total=e.data.total)};return x(()=>{A(()=>{g.value=window.innerHeight-400}),u()}),{confirm:_,show:r,param:n,roleList:d,sizeChange:e=>{n.pageSize=e,u()},currentChange:e=>{n.currentPage=e,u()},tableHeight:g,selectRoleId:a,getSelectRole:e=>{console.log(e),a.value=e.id}}}const X=B(F("")),ae=O({name:"AssignRole",setup(b,{expose:f}){const{dialog:o,onClose:i,onShow:g}=q(),{confirm:p,show:a,roleList:_,param:r,sizeChange:n,currentChange:d,tableHeight:u,selectRoleId:m,getSelectRole:v}=W(o,i,g);return f({show:a}),(S,e)=>{const s=j,l=$,E=N,y=H;return P(),T(M,{title:t(o).title,width:t(o).width,height:t(o).height,visible:t(o).visible,onOnClose:t(i),onOnConfirm:t(p)},{content:h(()=>[c(E,{size:"small",height:t(u),data:t(_).list,border:"",stripe:""},{default:h(()=>[c(l,{width:"50",align:"center",label:"\u9009\u62E9"},{default:h(w=>[c(s,{modelValue:t(m),"onUpdate:modelValue":e[0]||(e[0]=z=>U(m)?m.value=z:null),label:w.row.id,onChange:z=>t(v)(w.row)},{default:h(()=>[X]),_:2},1032,["modelValue","label","onChange"])]),_:1}),c(l,{prop:"name",label:"\u89D2\u8272\u540D\u79F0"})]),_:1},8,["height","data"]),c(y,{onSizeChange:t(n),onCurrentChange:t(d),"current-page":t(r).currentPage,"page-sizes":[10,20,40,80,100],"page-size":t(r).pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t(r).total,background:""},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])]),_:1},8,["title","width","height","visible","onOnClose","onOnConfirm"])}}});export{ae as default};
