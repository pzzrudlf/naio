import{p as F,a as h,y as B,k as U,o as k,c as y,x as e,v as o,e as l,F as I,D as P}from"./index.8b30d168.js";import{a as S,E as x,b as O,c as M}from"./el-form-item.78367822.js";import"./el-input.55b498ca.js";import{u as j,S as R}from"./useDialog.8d08ce90.js";import{_ as T}from"./parent.537a4f9b.js";import{u as $}from"./useSelectParent.5b1f63f6.js";var _=(d=>(d.ADD="0",d.EDIT="1",d))(_||{}),g=(d=>(d.ADD="\u65B0\u589E",d.EDIT="\u7F16\u8F91",d))(g||{});function q(){const d=F({parentName:[{required:!0,message:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u90E8\u95E8",trigger:"change"}],name:[{required:!0,message:"\u8BF7\u586B\u5199\u90E8\u95E8\u540D\u79F0",trigger:"change"}]}),f=F({type:"",id:"",pid:"",parentName:"",manager:"",deptAddress:"",deptPhone:"",name:"",deptCode:"",orderNum:""});return{rules:d,dialogModel:f}}const z=h({name:"addAndEdit",emits:["save"],setup(d,{expose:f,emit:b}){const{global:V}=B(),{rules:A,dialogModel:a}=q(),{dialog:r,onClose:D,onShow:C}=j(),E=U(),c=()=>{var n;(n=E.value)==null||n.validate(u=>{u&&(b("save",a),D())})};f({show:(n,u)=>{r.width=650,r.height=250,n==_.ADD?r.title=g.ADD:r.title=g.EDIT,C(),V.$resetForm(E.value,a),_.EDIT==n&&V.$objCopy(u,a),a.type=n}});const{parentRef:v,selectParent:w}=$(),N=n=>{console.log("\u7236\u7EC4\u4EF6\u53D6\u5230",n),a.pid=n.id,a.parentName=n.name};return(n,u)=>{const s=P,m=x,p=O,i=M;return k(),y(I,null,[e(R,{title:l(r).title,visible:l(r).visible,height:l(r).height,width:l(r).width,onOnClose:l(D),onOnConfirm:c},{content:o(()=>[e(l(S),{model:l(a),ref_key:"addAndEditDeptForm",ref:E,rules:l(A),"label-width":"80px",inline:!1,size:"small"},{default:o(()=>[e(i,null,{default:o(()=>[e(p,{span:12},{default:o(()=>[e(m,{prop:"parentName",label:"\u4E0A\u7EA7\u90E8\u95E8"},{default:o(()=>[e(s,{type:"hidden",modelValue:l(a).pid,"onUpdate:modelValue":u[0]||(u[0]=t=>l(a).pid=t)},null,8,["modelValue"]),e(s,{onClick:l(w),modelValue:l(a).parentName,"onUpdate:modelValue":u[1]||(u[1]=t=>l(a).parentName=t)},null,8,["onClick","modelValue"])]),_:1})]),_:1}),e(p,{span:12},{default:o(()=>[e(m,{prop:"name",label:"\u90E8\u95E8\u540D\u79F0"},{default:o(()=>[e(s,{modelValue:l(a).name,"onUpdate:modelValue":u[2]||(u[2]=t=>l(a).name=t)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(i,null,{default:o(()=>[e(p,{span:12},{default:o(()=>[e(m,{prop:"deptCode",label:"\u90E8\u95E8\u7F16\u7801"},{default:o(()=>[e(s,{modelValue:l(a).deptCode,"onUpdate:modelValue":u[3]||(u[3]=t=>l(a).deptCode=t)},null,8,["modelValue"])]),_:1})]),_:1}),e(p,{span:12},{default:o(()=>[e(m,{prop:"deptPhone",label:"\u90E8\u95E8\u7535\u8BDD"},{default:o(()=>[e(s,{modelValue:l(a).deptPhone,"onUpdate:modelValue":u[4]||(u[4]=t=>l(a).deptPhone=t)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(i,null,{default:o(()=>[e(p,{span:12},{default:o(()=>[e(m,{prop:"manager",label:"\u90E8\u95E8\u7ECF\u7406"},{default:o(()=>[e(s,{modelValue:l(a).manager,"onUpdate:modelValue":u[5]||(u[5]=t=>l(a).manager=t)},null,8,["modelValue"])]),_:1})]),_:1}),e(p,{span:12},{default:o(()=>[e(m,{prop:"deptAddress",label:"\u90E8\u95E8\u5730\u5740"},{default:o(()=>[e(s,{modelValue:l(a).deptAddress,"onUpdate:modelValue":u[6]||(u[6]=t=>l(a).deptAddress=t)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(i,null,{default:o(()=>[e(p,{span:12},{default:o(()=>[e(m,{prop:"orderNum",label:"\u90E8\u95E8\u5E8F\u53F7"},{default:o(()=>[e(s,{modelValue:l(a).orderNum,"onUpdate:modelValue":u[7]||(u[7]=t=>l(a).orderNum=t)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","visible","height","width","onOnClose"]),e(T,{ref_key:"parentRef",ref:v,onSelect:N},null,512)],64)}}});var X=Object.freeze(Object.defineProperty({__proto__:null,default:z},Symbol.toStringTag,{value:"Module"}));export{z as _,X as a,q as u};
